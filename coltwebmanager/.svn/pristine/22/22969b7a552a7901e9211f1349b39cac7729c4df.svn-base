import { Component, OnInit } from '@angular/core';
import { DataService, NumberService } from '../../_services';
import { FormBuilder, FormGroup, Validators } from '@angular/forms';

@Component({
  selector: 'app-location-independent',
  templateUrl: './location-independent.component.html',
  styleUrls: ['./location-independent.component.css', '../new-number.component.css']
})
export class LocationIndependentComponent implements OnInit {

	userData:any;
	buttonDisable:boolean = true;
	newnumberForm: FormGroup;
	formData:any;

	constructor(
		private numberService:NumberService,
	    private dataService : DataService,
	    private formBuilder: FormBuilder
	) { }

	ngOnInit() {
		this.userData = this.dataService.getUserData();
		/*form validation*/
	    this.newnumberForm = this.formBuilder.group({
	      telephone:[null, Validators.required],
	    });
	}

	onSubmit() {
		console.log(this.newnumberForm.controls);
		if (!this.newnumberForm.valid) {
		  this.buttonDisable = true;
		  return;
		} else {
		  this.userData.telephone = this.newnumberForm.controls.telephone.value,
		  this.dataService.setUserData(this.userData);
		}
	}

  	numberChange (event:any) {
		this.buttonDisable = true;
		if(event.target.value != "") {
		  this.buttonDisable = false;
		} 
	}
}

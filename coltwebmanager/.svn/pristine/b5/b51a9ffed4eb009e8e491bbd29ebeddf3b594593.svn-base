import { SidebarComponent } from './ui/sidebar/sidebar.component';
import { NgModule } from '@angular/core';
import { Routes, RouterModule } from '@angular/router';
import { MyNumberComponent } from "src/app/my-number/my-number.component";
import { NewNumberComponent } from './new-number/new-number.component';
import { SidebarLayoutComponent } from './_layout/sidebar-layout/sidebar-layout.component';
import { WelcomeComponent } from './welcome/welcome.component';
import { DashboardComponent } from './dashboard/dashboard.component';
import { GeoComponent } from './new-number/geo/geo.component';
import { LocationIndependentComponent } from './new-number/location-independent/location-independent.component';
import { UkAnyComponent } from './new-number/uk-any/uk-any.component';
import { UkPublicComponent } from './new-number/uk-public/uk-public.component';
import { AuthGuard } from './_guards';

const routes: Routes = [
    
    //Applayout or default layout goes here
    { path: '', redirectTo: '/dashboard', pathMatch: 'full' },
    { path: 'welcome', component: WelcomeComponent },
    { path: 'dashboard', component: DashboardComponent },

    //SideBar routes goes here
    { 
        path: '', 
        component: SidebarLayoutComponent,
        children: [
            { 
                path: 'newnumber', 
                component: NewNumberComponent, 
                canActivate: [AuthGuard],
                data: {
                    allowedRoles: ['internal', 'external']
                },
                children: [
                    {
                        path: 'geo',
                        component: GeoComponent
                    },
                    {
                        path: 'locationindependent',
                        component: LocationIndependentComponent
                    },
                    {
                        path: 'ukany',
                        component: UkAnyComponent
                    },
                    {
                        path: 'ukpublic',
                        component: UkPublicComponent
                    }
                ],
            },
            { 
                path: 'mynumber', 
                component: MyNumberComponent,
                canActivate: [AuthGuard] 
            },
        ]
    }
];

@NgModule( {
    exports: [RouterModule],
    imports: [RouterModule.forRoot( routes, { useHash: true } )]

} )
export class AppRoutingModule { }


import { Component, ElementRef, QueryList, OnInit, Input } from '@angular/core';
import { ViewChild } from '@angular/core';
import { Router, ActivatedRoute, Event, NavigationStart, NavigationEnd, NavigationError } from '@angular/router';
import { DataService } from '../_services';

@Component({
  selector: 'app-new-number',
  templateUrl: './new-number.component.html',
  styleUrls: ['./new-number.component.css']
})

export class NewNumberComponent implements OnInit {

  stepNumber:number = 1;
  userData:any;

  constructor( 
  	private route: ActivatedRoute,
    private router: Router,
    private dataService: DataService,
  ) { }
 
  ngOnInit() { 
    this.router.events.subscribe((val) => {
      // see also 
      if(val instanceof NavigationEnd) {
        if(val.url.indexOf('step2') >= 0) {
          this.stepNumber = 2;
        } else if(val.url.indexOf('step3') >=0) {
          this.stepNumber = 3;
        } else {
          this.stepNumber = 1;
        }
      }
    });
    this.getUserData();
  	this.dataService.changeRouteTitle(this.route.snapshot.data['routeName']);
  }

  getUserData() {
    this.userData = this.dataService.getUserData();
  }
}

